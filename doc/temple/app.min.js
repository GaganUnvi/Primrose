!function(n,o){"object"==typeof exports&&"undefined"!=typeof module?o():"function"==typeof define&&define.amd?define(o):o()}(this,function(){"use strict";var n="../images/rock.png",o="../images/sand.png",e="../images/deck.png",i=100,t=11,r=100,s=i/2,a=t/2,u=r/2,d=null,p=0,m=7,c=2.5,f=4,v=new Primrose.BrowserEnvironment({skyTexture:"../images/bg.jpg",groundTexture:e,useFog:!0});v.addEventListener("ready",function(){function p(n,o){v.splice(0);for(var e=n*n,i=-n;i<=n;i+=o)for(var t=i*i,r=-n;r<=n;r+=o){var a=r*r;if(t+a<e){var d=Math.sqrt(e-t-a);v.push(v3(i,d,r)),v.push(v3(i,-d,r))}}put(cloud(v,16711680,o*Math.sqrt(2))).on(c).at(s-n,n,u-n)}function m(n,e,i,t,r,s){var a=textured(cylinder(n,e,i,6,1),o,{resolve:function(){put(a).on(c).at(t,r,s)}})}var c=put(hub()).on(this.scene).at(-s,0,-u).obj(),f=brick(e,i,.1,r,{resolve:function(){put(f).on(c).at(i/2,12.5,r/2)}}).named("Ceiling"),v=[];d=brick(n,1,1,1,{resolve:function(){put(d).on(c).at(0,0,0)}}).named("Ball");for(var l=0;l<5e3;++l)v.push(v3(Primrose.Random.number(-.5*i,.5*i),Primrose.Random.number(-.5*t,.5*t),Primrose.Random.number(-.5*r,.5*r)));put(cloud(v,this.options.backgroundColor,.05)).on(c).at(s,a,u),p(10,.1);for(var l=0;l<100;++l){var g=Primrose.Random.int(i),b=Primrose.Random.int(r);m(.5,1,1,g,0,b),m(.5,.5,11,g,6,b),m(2,.5,1,g,12,b)}}.bind(v)),v.addEventListener("update",function(n){p+=n,d.position.x+=m*n,d.position.y+=c*n,d.position.z+=f*n,(d.position.x<0&&m<0||i<=d.position.x&&m>0)&&(m*=-1),(d.position.y<1&&c<0||t<=d.position.y&&c>0)&&(c*=-1),(d.position.z<0&&f<0||r<=d.position.z&&f>0)&&(f*=-1)})});