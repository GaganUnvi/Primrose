function eye(e,o){var n=sphere(.05,6,3).colored(16777215).addTo(o).at(.07*e,.05,.16);return sphere(.01,3,2).colored(0).addTo(n).at(0,0,.045),n}function Jabber(e,o,n){var a=R.item(Primrose.Constants.SKINS),r=hub().at(R.number(-e,e),0,R.number(-o,o)),t=sphere(.2,14,7).colored(a,{shadow:!0}).addTo(r).at(0,.125,0),s=v3(R.number(-n,n),0,R.number(-n,n)),i=v3(0,0,0);return eye(-1,t),eye(1,t),r.rotation.y=Math.PI,r.update=function(n){s.y-=env.options.gravity*n,r.position.add(i.copy(s).multiplyScalar(n)),(s.x>0&&r.position.x>=e||s.x<0&&r.position.x<=-e)&&(s.x*=-1),(s.z>0&&r.position.z>=o||s.z<0&&r.position.z<=-o)&&(s.z*=-1),s.y<0&&r.position.y<0&&(s.y=0,r.position.y=0),i.copy(r.position).sub(env.head.position);var a=i.length();a<3?(i.divideScalar(a),i.y=0,s.add(i.multiplyScalar((3-a)/100)),i.set(R.number(-.01,.01),R.number(-.01,.01),R.number(-.01,.01)),r.position.add(i),r.lookAt(env.head.position)):r.lookAt(i.copy(s).add(r.position))},t.addEventListener("select",function(e){i.copy(e.hit.face.normal),i.y=env.options.gravity/2,s.add(i)}),r}var WIDTH=100,HEIGHT=6,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,t=0,jabs={},R=Primrose.Random,env=new Primrose.BrowserEnvironment({backgroundColor:13231854,skyTexture:"../shared_assets/images/bg.jpg",groundTexture:"../shared_assets/images/grass.png",font:"../shared_assets/fonts/helvetiker_regular.typeface.json",useFog:!0,drawDistance:100,enableShadows:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",progress:Preloader.thunk});env.addEventListener("ready",function(){for(var e=0;e<10;++e){var o=Jabber(MIDX/5,MIDZ/5,1);jabs[o.uuid]=o,env.stage.add(o)}Preloader.hide()}),env.addEventListener("update",function(){for(var e in jabs)jabs[e].update(env.deltaTime)});
