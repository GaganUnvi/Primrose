!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=function(){return t(n.response)},n.onprogress=r.thunk,n.open("GET",e),n.send()}function t(r){var n=r.shift();e(n,function(e){var o=document.createElement("script");o.type="text/javascript",window.DEBUG?o.src=n:o.innerHTML=e,document.body.appendChild(o),r.length>0&&setTimeout(t,0,r)})}var r={bar:null,files:{},loaded:0,total:0,hide:function(){r.bar&&(r.bar.style.display="none")},thunk:function(e){var t=e.target.responseURL||e.target.currentSrc;if(t){r.files[t]||(r.files[t]={});var n=r.files[t];if("number"==typeof e.loaded)n.loaded=e.loaded,n.total=e.total;else{for(var o=e.srcElement.buffered,a=Number.MAX_VALUE,l=Number.MIN_VALUE,d=0;d<o.length;++d)a=Math.min(a,o.start(d)),l=Math.max(l,o.end(d));n.loaded=1e3*l,n.total=1e3*e.srcElement.duration}}var i=0,s=0;for(var u in r.files){var f=r.files[u];s+=f.loaded,i+=f.total}r.loaded=s,r.total=i,r.bar||(r.bar=document.querySelector("progress")),r.bar&&i&&(r.bar.max=i,r.bar.value=s)}},n=document.querySelectorAll("script"),o=n[n.length-1];return o&&o.dataset.files&&t(o.dataset.files.split(",")),r});