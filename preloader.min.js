!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=function(){return t(n.response)},n.onprogress=o.thunk,n.open("GET",e),n.send()}function t(){if(document.body)if(window.DEBUG)d.forEach(function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)});else{var e=document.createElement("script");e.innerHTML=d.join("\n"),document.body.appendChild(e)}else setTimeout(t,0)}function n(n,o,r){e(n,function(e){window.DEBUG?d[o]=n:d[o]=e,++l,l===r.length&&t()})}var o={bar:null,files:{},loaded:0,total:0,hide:function(){o.bar&&(o.bar.style.display="none")},thunk:function(e){var t=e.target.responseURL||e.target.currentSrc;if(t){o.files[t]||(o.files[t]={});var n=o.files[t];if("number"==typeof e.loaded)n.loaded=e.loaded,n.total=e.total;else{for(var r=e.srcElement.buffered,a=Number.MAX_VALUE,d=Number.MIN_VALUE,l=0;l<r.length;++l)a=Math.min(a,r.start(l)),d=Math.max(d,r.end(l));n.loaded=1e3*d,n.total=1e3*e.srcElement.duration}}var i=0,s=0;for(var u in o.files){var f=o.files[u];s+=f.loaded,i+=f.total}o.loaded=s,o.total=i,o.bar||(o.bar=document.querySelector("progress")),o.bar&&i&&(o.bar.max=i,o.bar.value=s)}},r=document.querySelectorAll("script"),a=r[r.length-1],d=[],l=0;return a&&a.dataset.files&&a.dataset.files.split(",").forEach(n),o});