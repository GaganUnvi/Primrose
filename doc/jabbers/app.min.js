!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function o(o){p[o.objectID]&&p[o.objectID].jump(o.faceNormal)}function e(o,e){var n=put(colored(sphere(.05,6,3),16777215)).on(e).at(.07*o,.05,.16).obj();return put(colored(sphere(.01,3,2),0)).on(n).at(0,0,.045),n}function n(o,n,t){var i=s.item(Primrose.SKINS_VALUES),r=colored(sphere(.2,14,7),i),a=v3(s.number(-t,t),0,s.number(-t,t)),p=v3(0,0,0);return r.position.set(s.number(-o,o),1,s.number(-n,n)),e(-1,r),e(1,r),r.rotation.y=Math.PI,r.update=function(e){a.y-=d.options.gravity*e,r.position.add(p.copy(a).multiplyScalar(e)),(a.x>0&&r.position.x>=o||a.x<0&&r.position.x<=-o)&&(a.x*=-1),(a.z>0&&r.position.z>=n||a.z<0&&r.position.z<=-n)&&(a.z*=-1),a.y<0&&r.position.y<1&&(a.y=0,r.position.y=1),p.copy(r.position).sub(d.input.head.position);var t=p.length();t<3?(r.lookAt(d.input.head.position),r.position.set(s.number(-.01,.01),s.number(-.01,.01),s.number(-.01,.01)),p.divideScalar(t),p.y=0,a.add(p.multiplyScalar((3-t)/100))):r.lookAt(p.copy(a).add(r.position))},r.jump=function(o){console.log(o),p.fromArray(o),p.y=d.options.gravity/2,a.add(p)},r}var t=100,i=100,r=t/2,a=i/2,p={},s=Primrose.Random,d=new Primrose.BrowserEnvironment({backgroundColor:13231854,skyTexture:"../images/bg.jpg",groundTexture:"../images/grass.png",font:"../fonts/helvetiker_regular.typeface.json",useFog:!0,drawDistance:100});d.addEventListener("gazecomplete",o),d.addEventListener("pointerend",o),d.addEventListener("ready",function(){for(var o=0;o<25;++o){var e=n(r/5,a/5,1);p[e.uuid]=e,d.appendChild(e)}}),d.addEventListener("update",function(o){for(var e in p)p[e].update(o)})});