function makeJabJump(e){e.hit&&jabs[e.hit.object.uuid]&&jabs[e.hit.object.uuid].jump(e.hit.face.normal)}function eye(e,n){var o=put(colored(sphere(.05,6,3),16777215)).on(n).at(.07*e,.05,.16).obj();return put(colored(sphere(.01,3,2),0)).on(o).at(0,0,.045),o}function Jabber(e,n,o){var t=R.item(Primrose.Constants.SKINS),i=colored(sphere(.2,14,7),t),r=v3(R.number(-o,o),0,R.number(-o,o)),a=v3(0,0,0);return i.position.set(R.number(-e,e),1,R.number(-n,n)),eye(-1,i),eye(1,i),i.rotation.y=Math.PI,i.update=function(o){r.y-=env.options.gravity*o,i.position.add(a.copy(r).multiplyScalar(o)),(r.x>0&&i.position.x>=e||r.x<0&&i.position.x<=-e)&&(r.x*=-1),(r.z>0&&i.position.z>=n||r.z<0&&i.position.z<=-n)&&(r.z*=-1),r.y<0&&i.position.y<1&&(r.y=0,i.position.y=1),a.copy(i.position).sub(env.input.head.position);var t=a.length();t<3?(a.divideScalar(t),a.y=0,r.add(a.multiplyScalar((3-t)/100)),a.set(R.number(-.01,.01),R.number(-.01,.01),R.number(-.01,.01)),i.position.add(a),i.lookAt(env.input.head.position)):i.lookAt(a.copy(r).add(i.position))},i.jump=function(e){a.copy(e),a.y=env.options.gravity/2,r.add(a)},i}var WIDTH=100,HEIGHT=6,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,t=0,jabs={},R=Primrose.Random,env=new Primrose.BrowserEnvironment({backgroundColor:13231854,skyTexture:"../images/bg.jpg",groundTexture:"../images/grass.png",font:"../fonts/helvetiker_regular.typeface.json",useFog:!0,drawDistance:100,fullScreenButtonContainer:"#fullScreenButtonContainer"});env.addEventListener("gazecomplete",makeJabJump),env.addEventListener("pointerend",makeJabJump),env.addEventListener("ready",function(){for(var e=0;e<1;++e){var n=Jabber(MIDX/5,MIDZ/5,1);jabs[n.uuid]=n,env.appendChild(n),env.registerPickableObject(n)}}),env.addEventListener("update",function(e){for(var n in jabs)jabs[n].update(e)});