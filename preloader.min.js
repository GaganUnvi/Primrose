!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=function(){return t(n.response)},n.onprogress=o.thunk,n.open("GET",e),n.send()}function t(){if(d.length>0&&void 0!==d[0]){var e=document.createElement("script"),n=d.shift();e.type="text/javascript",window.DEBUG?(e.src=n,e.onload=t):(e.innerHTML=n,setTimeout(t)),document.body.appendChild(e)}}function n(n,o){e(n,function(e){if(window.DEBUG?d[o]=n:d[o]=e,"loading"!==document.readyState)t();else{var a=document.onreadystatechange||function(){};document.onreadystatechange=function(e){a(e),t(e)}}})}var o={bar:null,files:{},loaded:0,total:0,hide:function(){o.bar&&(o.bar.style.display="none")},thunk:function(e){var t=e.target.responseURL||e.target.currentSrc;if(t){o.files[t]||(o.files[t]={});var n=o.files[t];if("number"==typeof e.loaded)n.loaded=e.loaded,n.total=e.total;else{for(var a=e.srcElement.buffered,r=Number.MAX_VALUE,d=Number.MIN_VALUE,i=0;i<a.length;++i)r=Math.min(r,a.start(i)),d=Math.max(d,a.end(i));n.loaded=1e3*d,n.total=1e3*e.srcElement.duration}}var l=0,s=0;for(var u in o.files){var f=o.files[u];s+=f.loaded,l+=f.total}o.loaded=s,o.total=l,o.bar||(o.bar=document.querySelector("progress")),o.bar&&l&&(o.bar.max=l,o.bar.value=s)}},a=document.querySelectorAll("script"),r=a[a.length-1],d=[];return r&&r.dataset.files&&r.dataset.files.split(",").forEach(n),o});