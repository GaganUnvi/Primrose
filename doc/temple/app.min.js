var GRASS="../images/grass.png",ROCK="../images/rock.png",SAND="../images/sand.png",WATER="../images/water.png",DECK="../images/deck.png",WIDTH=100,HEIGHT=11,DEPTH=100,MIDX=WIDTH/2,MIDY=HEIGHT/2,MIDZ=DEPTH/2,ball=null,t=0,dx=7,dy=2.5,dz=4,env=new Primrose.BrowserEnvironment({skyTexture:"../images/bg.jpg",groundTexture:DECK,useFog:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",progress:Preloader.thunk});env.addEventListener("ready",function(){function n(n,o){t.splice(0);for(var r=n*n,a=-n;a<=n;a+=o)for(var i=a*a,s=-n;s<=n;s+=o){var l=s*s;if(i+l<r){var d=Math.sqrt(r-i-l);t.push(v3(a,d,s)),t.push(v3(a,-d,s))}}put(cloud(t,16711680,o*Math.sqrt(2))).on(e).at(MIDX-n,n,MIDZ-n)}function o(n,o,r,t,a,i){var s=textured(cylinder(n,o,r,6,1),SAND,{resolve:function(){put(s).on(e).at(t,a,i)}})}var e=put(hub()).on(this.scene).at(-MIDX,0,-MIDZ).obj(),r=brick(DECK,WIDTH,.1,DEPTH,{resolve:function(){put(r).on(e).at(WIDTH/2,12.5,DEPTH/2)}}).named("Ceiling"),t=[];ball=brick(ROCK,1,1,1,{resolve:function(){put(ball).on(e).at(0,0,0)}}).named("Ball");for(var a=0;a<5e3;++a)t.push(v3(Primrose.Random.number(-.5*WIDTH,.5*WIDTH),Primrose.Random.number(-.5*HEIGHT,.5*HEIGHT),Primrose.Random.number(-.5*DEPTH,.5*DEPTH)));put(cloud(t,this.options.backgroundColor,.05)).on(e).at(MIDX,MIDY,MIDZ),n(10,.1);for(var a=0;a<100;++a){var i=Primrose.Random.int(WIDTH),s=Primrose.Random.int(DEPTH);o(.5,1,1,i,0,s),o(.5,.5,11,i,6,s),o(2,.5,1,i,12,s)}Preloader.hide()}.bind(env)),env.addEventListener("update",function(n){t+=n,ball.position.x+=dx*n,ball.position.y+=dy*n,ball.position.z+=dz*n,(ball.position.x<0&&dx<0||WIDTH<=ball.position.x&&dx>0)&&(dx*=-1),(ball.position.y<1&&dy<0||HEIGHT<=ball.position.y&&dy>0)&&(dy*=-1),(ball.position.z<0&&dz<0||DEPTH<=ball.position.z&&dz>0)&&(dz*=-1)});