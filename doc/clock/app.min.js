var skyColor=16777087,env=new Primrose.BrowserEnvironment({backgroundColor:skyColor,groundTexture:"../images/sand.png",useFog:!0,fullScreenButtonContainer:"#fullScreenButtonContainer",enableShadows:!0,shadowMapSize:2048,progress:Preloader.thunk}),sunDistance=20,sun=circle(1,45).colored(16777215,{unshaded:!0}).named("sun"),t=function(e,n,t,a,s){return cylinder(n,t,a,s,1).textured("../images/rock.png",{shadow:!0,progress:Preloader.thunk}).named(e)},sunDialColor=13684928,dial=t("dial",.333,.333,.03,45),handHeight=.25,hand=t("hand",.01,.02,handHeight,3),standHeight=1,stand=t("stand",.1,.3,standHeight,4),baseHeight=.1,base=t("base",.35,.35,baseHeight,4),time=0;env.sky.add(sun),sun.material.fog=!1,sun.material.needsUpdate=!0,env.scene.add(stand),stand.position.y+=standHeight/2,stand.position.z+=-1.5,stand.rotation.y=Math.PI/4,stand.add(dial),dial.position.y+=standHeight/2,stand.add(base),base.position.y+=(baseHeight-standHeight)/2,dial.add(hand),hand.position.y+=handHeight/2,env.addEventListener("ready",Preloader.hide),env.addEventListener("update",function(e){time+=e,env.sun.latLon(10-time,30,sunDistance),sun.position.copy(env.sun.position),sun.lookAt(env.sky.position);var n=(1+sun.position.y/sunDistance)/2;env.ambient.intensity=.5*n,env.scene.fog.color.setHex(skyColor).multiplyScalar(n),env.renderer.setClearColor(env.scene.fog.color.getHex())});