<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <meta name="web-app-capable" content="yes">
    <meta name="theme-color" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="description" content="A WebVR application framework.">
    <meta name="keywords" content="WebGL, WebVR, HTML5, JavaScript, text editor, source code editor, virtual reality, Primrose">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@Primrose_VR">
    <meta property="og:site_name" content="Primrose VR">
    <meta property="og:description" content="Primrose: Framework for WebVR Applications">
    <meta name="twitter:description" content="Primrose: Framework for WebVR Applications">
    <meta property="og:url" content="http://www.primrosevr.com/undefined"><!-- start main.pug meta block --><!-- end main.pug meta block -->
<!-- start main.pug title block -->
    <meta property="og:title" content="Primrose VR: WebVR Application Framework">
    <meta name="twitter:title" content="Primrose VR: WebVR Application Framework">
    <title>Primrose VR: WebVR Application Framework</title><!-- end main.pug title block -->
    <link type="text/css" rel="stylesheet" href="../../demos/style.css">
    <style>#frontBuffer { background-image:url(screenshot.jpg); }</style>
    <script>window.DEBUG = true; window.PRIMROSE_TELEMETRY_OPT_OUT = true;</script><!-- LIVE RELOADER -->
<script src="../../node_modules/socket.io-client/dist/socket.io.js"></script>
<script>
(function(path) {

function mangle(name) {
  return "_" + name;
}

function wrapFunction(send, name) {
  var orig = name;
  while (console[orig]) {
    orig = mangle(orig);
  }
  if (console[name]) {
    console[orig] = console[name];
  } else {
    orig = null;
  }
  console[name] = function () {
    var args = [];
    for (var i = 0; i < arguments.length; ++i) {
      var elem = arguments[i];
      if (elem === null) {
        args.push("null");
      } else if (elem === undefined) {
        args.push("undefined");
      } else if (typeof elem === "object" && !(elem instanceof String)) {
        var obj1 = elem,
            obj2 = {};
        for (var key in obj1) {
          obj2[key] = obj1[key];
          if (obj2[key] !== null && obj2[key] !== undefined) {
            obj2[key] = obj2[key].toString();
          }
        }
        args.push(obj2);
      } else {
        args.push(elem.toString());
      }
    }

    var obj = send({ name: name, args: args });
    if (orig && console[orig] && obj) {
      console[orig].apply(console, arguments);
    }
  };
}

var isBad = location.protocol === "file:",
  send = isBad ? function identity(data) {
      return data;
    } : function (data) {
      socket.emit("logging", data);
      return data;
    },
  redirects = ["log", "info", "error"],
  status = "enabled.",
  socket = io(path)
    .on("connect", function() {
      console.log("Live reload " + status);
      status = "reestablished.";
    })
    .on("stop", function() { dispatchEvent(new CustomEvent("stop")); })
    .on("reload", function() { location.reload(); })
    .on("command", function(cmd) {
      console._log(cmd);
      console.log(eval(cmd));
    });

if (isBad) {
  console.warn("Can't perform HTTP requests from the file system. Not going to setup the error proxy, but will setup the error catch-all.");
}

redirects.forEach(function (name) {
  return wrapFunction(send, name);
});

window.addEventListener("error", function (evt) {
  var colno = evt.colno || window.event && window.event.errorCharacter,
      done = false,
      err = evt.error,
      stack = err && err.stack;

  if (!stack) {
    if (arguments.callee) {
      var head = arguments.callee.caller;
      while (head) {
        stack.push(head.name);
        head = head.caller;
      }
    } else {
      stack = "N/A";
    }
  }

  var data = {
    type: "error",
    time: new Date().toLocaleTimeString(),
    message: evt.message,
    source: evt.filename,
    lineno: evt.lineno,
    colno: colno,
    error: err && err.message,
    stack: stack
  };

  try {
    send({name: "error", args: [data]});
  } catch (exp) {
  }
}, false);

})(location.origin.replace(/^http/, "ws"));
</script>

    <script src="../../preloader.js" data-files="../../node_modules/cannon/build/cannon.js,../../Primrose.js,app.js"></script>
  </head>
  <body><!-- start demoIFrame.pug main block -->
    <h1>Example: Physics</h1>
    <canvas id="frontBuffer"></canvas>
    <div id="controls">
      <div id="fullScreenButtonContainer"></div>
      <progress></progress>
    </div><!-- end demoIFrame.pug main block -->
  </body>
</html>