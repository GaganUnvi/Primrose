!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function t(t){this.object=hub(),this.title=put(text3D(.15,t).center().colored(h).named("text"+t)).on(this.object).at(0,.7,-1.3).obj(),this.btns=[],this.btnState=[],this.type=t,range(i,function(t){var o=Math.floor(t/e),i=t%e,r=10*(n-o),a=10*(i-s),u=box(b,b,l).colored(c).named("btn"+t).latLon(a,r);put(box(1.1*b,1.1*b,.9*l).colored(h).named("bevel"+t)).on(u),g.registerPickableObject(u),u.onselect=this.select.bind(this,t),u.onenter=this.play.bind(this,t,0),this.object.add(u),this.btns.push(u)}.bind(this))}var e=8,o=4,i=o*e,n=(o-1)/2,s=(e-1)/2,r=16777215,c=16711680,h=16776960,a=[],u=0,d=0,p=null,b=.22,l=.02,f=!1,m=2/e,y=v3(),g=new Primrose.BrowserEnvironment({groundTexture:"https://www.primrosevr.com/doc/images/deck.png",font:"https://primrosevr.com/doc/fonts/helvetiker_regular.typeface.json",backgroundColor:0,useFog:!0,useGaze:isMobile,drawDistance:10,fullScreenButtonContainer:"body"});t.prototype.play=function(t,e){this.highlight(t,h),this.object.getWorldDirection(y);var o=.85*m;g.music.play(this.type,25-i+3*t,.25,o,e).at(this.object.x,this.object.y,this.object.z,y.x,y.y,y.z),setTimeout(this.highlight.bind(this,t),1e3*o)},t.prototype.update=function(){if(d!==p)for(var t=g.audio.context.currentTime,i=m*Math.ceil(t/m),n=i-t,s=0;s<o;++s){var r=s*e+d;this.btnState[r]&&this.play(r,n)}y.set(this.object.position.x,g.input.head.position.y,this.object.position.z),this.object.position.lerp(y,.01)},t.prototype.highlight=function(t,e){e=e||this.btnState[t]&&r||c;var o=this.btns[t];o.colored(e).named(o.name)},t.prototype.select=function(t,e){g.input.hasMouse&&"MousePointer"!==e.pointer.name||(this.btnState[t]=!this.btnState[t],this.highlight(t))},g.addEventListener("ready",function(){var e=Primrose.Audio.Music.TYPES,o=e.length;e.forEach(function(e,i){var n=new t(e);a.push(n),g.scene.add(n.object),n.object.latLon(0,100*(i-(o-1)/2)/o)})}),g.addEventListener("update",function(t){f||(u+=t,u>m&&(u-=m,d=(d+1)%e),a.forEach(function(t){return t.update()}),p=d),f=!1}),window.addEventListener("focus",function(){return f=!0})});